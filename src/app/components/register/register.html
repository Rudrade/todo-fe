<div class="register-card">
  <div class="d-flex flex-row" style="align-items: center">
    <h2>Create account</h2>
    <img src="logo.png" class="ms-5 mb-3" alt="" />
  </div>
  <p class="text-muted">Fill in the details to create your account.</p>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="mt-3">
    <div class="mb-3">
      <label class="form-label" for="username">Username</label>
      <input
        id="username"
        type="text"
        class="form-control"
        formControlName="username"
        autocomplete="off"
      />
      @if (form.controls.username.touched && form.controls.username.invalid) {
      <small class="text-danger">Username is required.</small>
      }
    </div>

    <div class="mb-3">
      <label class="form-label" for="email">Email</label>
      <input
        id="email"
        type="email"
        class="form-control"
        formControlName="email"
        autocomplete="off"
      />
      @if (form.controls.email.touched && form.controls.email.hasError('required')) {
      <small class="text-danger">Email is required.</small>
      } @else if (form.controls.email.touched && form.controls.email.hasError('email')) {
      <small class="text-danger">Enter a valid email.</small>
      }
    </div>

    <div class="mb-3">
      <label class="form-label" for="password">Password</label>
      <input
        id="password"
        type="password"
        class="form-control"
        formControlName="password"
        autocomplete="off"
      />
      @if (form.controls.password.touched && form.controls.password.invalid) {
      <small class="text-danger">Password is required.</small>
      }
    </div>

    <div class="mb-3">
      <label class="form-label" for="confirmPassword">Confirm password</label>
      <input
        id="confirmPassword"
        type="password"
        class="form-control"
        formControlName="confirmPassword"
        autocomplete="off"
      />
      @if (form.controls.confirmPassword.touched && form.hasError('passwordsMismatch')) {
      <small class="text-danger">Passwords must match.</small>
      } @else if (form.controls.confirmPassword.touched &&
      form.controls.confirmPassword.hasError('required')) {
      <small class="text-danger">Please confirm your password.</small>
      }
    </div>

    <button class="btn btn-primary" type="submit" [disabled]="submitting()">Register</button>
    <button
      class="btn btn-link ms-2"
      [routerLink]="'/login'"
      type="button"
      [disabled]="submitting()"
    >
      Back to login
    </button>
    @if(submitting()) {
    <div class="d-flex justify-content-center">
      <div class="spinner-border" role="status"></div>
    </div>
    }
  </form>

  @if (error()) {
  <small class="text-danger">{{ error() }}</small>
  }
</div>

<div class="alerts">
  @for (alert of alerts(); track alert.id) {
  <app-alert [data]="alert" />
  }
</div>
